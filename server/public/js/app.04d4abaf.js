(function(e){function t(t){for(var n,o,c=t[0],i=t[1],u=t[2],m=0,d=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,c=1;c<r.length;c++){var i=r[c];0!==a[i]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("8a23"),a=r.n(n);a.a},1:function(e,t){},"22de":function(e,t,r){"use strict";var n=r("88fe"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],o=(r("034f"),r("2877")),c={},i=Object(o["a"])(c,a,s,!1,null,null,null),u=i.exports,l=r("f309");n["a"].use(l["a"]);var m=new l["a"]({}),d=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[r("v-navigation-drawer",{attrs:{app:"",clipped:""},scopedSlots:e._u([{key:"append",fn:function(){return[r("div",{staticClass:"pa-2"},[r("v-switch",{attrs:{primary:"",label:"Dark"},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}}),r("v-btn",{attrs:{block:"",to:"/"}},[e._v("Room List")]),r("v-btn",{attrs:{block:"",to:"/create"}},[e._v("Create Room")]),r("v-btn",{attrs:{block:""},on:{click:e.logOut}},[e._v("Logout")])],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.rooms?r("div",[r("v-list",{attrs:{shaped:""}},e._l(e.rooms,(function(t){return r("v-list-item",{key:t._id,attrs:{to:"/chat/"+t._id}},[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.title)}},[e._v(" "+e._s(t._id)+" ")])],1),r("v-btn",{attrs:{icon:"",color:"gray"},on:{click:function(r){return e.deleteRoom(t._id,t.title)}}},[r("v-icon",[e._v("mdi-cancel")])],1)],1)})),1)],1):e._e()]),r("v-app-bar",{attrs:{app:"","clipped-left":""}},[r("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),r("v-toolbar-title",[e._v("Vuetify Chat")])],1),r("v-content",[r("v-container",{staticClass:"fill-height"},[r("router-view")],1)],1),r("v-snackbar",{attrs:{color:e.snackbar.color},model:{value:e.snackbar.showing,callback:function(t){e.$set(e.snackbar,"showing",t)},expression:"snackbar.showing"}},[e._v(" "+e._s(e.snackbar.text)+" "),r("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.showing=!1}}},[e._v("Close")])],1)],1)},f=[],h=(r("96cf"),r("1da1")),v=r("5530"),b=r("2f62"),g=r("bc3a"),w=r.n(g),x={props:{source:String},data:function(){return{drawer:null,items:[{name:"chat"}]}},created:function(){this.$vuetify.theme.dark=!0},computed:Object(b["c"])(["user","rooms","snackbar"]),methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms","successMessage","errorMessage"])),{},{logOut:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.go("/login");case 1:case"end":return t.stop()}}),t)})))()},deleteRoom:function(e,t){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.a.delete("room/".concat(e));case 3:return r.successMessage('"You just deleted '.concat(t)),console.log("good"),n.next=7,r.fetchRooms();case 7:n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),r.errorMessage("Opps, you don't have permission!"),console.log("bad");case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()}})},k=x,_=(r("22de"),r("6544")),R=r.n(_),j=r("7496"),O=r("40dc"),y=r("5bc1"),V=r("8336"),C=r("a523"),M=r("a75b"),U=r("132d"),$=r("8860"),S=r("da13"),q=r("5d23"),E=r("f774"),P=r("2db4"),L=r("b73d"),A=r("2a7f"),T=Object(o["a"])(k,p,f,!1,null,null,null),B=T.exports;R()(T,{VApp:j["a"],VAppBar:O["a"],VAppBarNavIcon:y["a"],VBtn:V["a"],VContainer:C["a"],VContent:M["a"],VIcon:U["a"],VList:$["a"],VListItem:S["a"],VListItemContent:q["a"],VListItemTitle:q["b"],VNavigationDrawer:E["a"],VSnackbar:P["a"],VSwitch:L["a"],VToolbarTitle:A["a"]});var I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{staticClass:"mx-auto"},[r("v-container",[r("v-row",[r("v-text-field",{attrs:{counter:12,label:"Username",hint:"Username for login",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("v-row",[r("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"input-10-1",label:"Password",hint:"At least 6 characters",counter:"",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Log in")]),r("v-btn",{staticClass:"mr-4",on:{click:e.clear}},[e._v("clear")]),r("v-btn",{staticClass:"mr-4",on:{click:function(t){return e.$router.push("signup")}}},[e._v("Sign Up")])],1)},N=[],F={data:function(){return{show:!1,username:"",password:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.username.length>=4&&this.username.length<=12&&this.password.length>=6}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["login","fetchRooms","errorMessage","successMessage"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.login({username:e.username,password:e.password});case 3:return t.next=5,e.fetchRooms();case 5:e.successMessage("Welcome Back!"),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.errorMessage("Username or password is incorrect");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},clear:function(){this.username="",this.password=""}})},D=F,J=r("4bd4"),Y=r("0fd9"),z=r("8654"),H=Object(o["a"])(D,I,N,!1,null,null,null),K=H.exports;R()(H,{VBtn:V["a"],VContainer:C["a"],VForm:J["a"],VRow:Y["a"],VTextField:z["a"]});var W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"d-flex flex-column fill-height flex-grow-1",attrs:{flat:""}},[r("v-card-title",[e._v("room title")]),r("v-card-text",{staticClass:"flex-grow-1 overflow-y-auto"},e._l(e.messages,(function(t){return r("div",{key:t._id,staticClass:"d-flex",class:{"flex-row-reverse":t.user===e.user.id}},[r("v-card",{staticClass:"ma-3",attrs:{outlined:""}},[r("v-card-title",{staticClass:"text-body-1"},[e._v(" "+e._s(t.nickname)+" ")]),r("v-card-text",[e._v(e._s(t.content))]),r("v-card-text",[e._v(e._s(t.createAt))])],1)],1)})),0),r("v-card-text",{staticClass:"flex-shrink-1"},[r("v-text-field",{attrs:{id:"input"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),r("v-btn",{staticClass:"mr-4",on:{click:e.send}},[e._v("Send")])],1)],1)},G=[],Q={props:{id:{}},data:function(){return{messages:[],message:null}},sockets:{message:function(e){this.messages.push(e)}},created:function(){this.fetchMessages(),this.joinRoom()},computed:Object(v["a"])({},Object(b["c"])(["user","rooms"])),mounted:function(){document.getElementById("input").scrollIntoView()},watch:{$route:"joinRoom"},methods:{scrollToEnd:function(){var e=this.$el.querySelector("#input");e.scrollTop=e.scrollHeight},fetchMessages:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("room/".concat(e.id));case 2:r=t.sent,e.messages=r.data.messages;case 4:case"end":return t.stop()}}),t)})))()},send:function(){this.$socket.emit("message",{id:this.id,userId:this.$store.state.Auth.user,message:this.message}),this.message=""},joinRoom:function(){this.$socket.emit("joinRoom",this.id),this.fetchMessages()}}},X=Q,Z=r("b0af"),ee=r("99d9"),te=Object(o["a"])(X,W,G,!1,null,null,null),re=te.exports;R()(te,{VBtn:V["a"],VCard:Z["a"],VCardText:ee["b"],VCardTitle:ee["c"],VTextField:z["a"]});var ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{staticClass:"mx-auto"},[r("v-container",[r("v-row",[r("v-text-field",{attrs:{counter:12,label:"Username",hint:"Username for login",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("v-row",[r("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"input-10-1",label:"Password",hint:"At least 6 characters",counter:"",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-row",[r("v-text-field",{attrs:{counter:10,label:"Nickname",hint:"Displays to everybody",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Sign Up")]),r("v-btn",{on:{click:e.clear}},[e._v("clear")])],1)},ae=[],se={data:function(){return{show:!1,username:"",password:"",nickname:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.username.length>=4&&this.username.length<=12&&this.nickname.length>=4&&this.nickname.length<=10&&this.password.length>=6}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["signup","login","fetchRooms","errorMessage","successMessage"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.signup({nickname:e.nickname,username:e.username,password:e.password});case 3:return t.next=5,e.fetchRooms();case 5:e.successMessage("Hey! ".concat(e.nickname," Let's chat!")),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.errorMessage("Username already existed！");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},clear:function(){this.username="",this.password="",this.nickname=""}})},oe=se,ce=Object(o["a"])(oe,ne,ae,!1,null,null,null),ie=ce.exports;R()(ce,{VBtn:V["a"],VContainer:C["a"],VForm:J["a"],VRow:Y["a"],VTextField:z["a"]});var ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{staticClass:"mx-auto"},[r("v-container",[r("v-row",[r("v-text-field",{attrs:{counter:12,label:"Room Name",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),r("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Create")])],1)},le=[],me={data:function(){return{show:!1,title:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.title.length>=4&&this.title.length<=12}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms","successMessage","errorMessage"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("room",{title:e.title});case 3:return t.next=5,e.fetchRooms();case 5:e.successMessage("You just created ".concat(e.title,"!")),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.errorMessage("Create Failed");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}})},de=me,pe=Object(o["a"])(de,ue,le,!1,null,null,null),fe=pe.exports;R()(pe,{VBtn:V["a"],VContainer:C["a"],VForm:J["a"],VRow:Y["a"],VTextField:z["a"]});var he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pa-3"},[r("h3",[e._v("Room List")]),r("v-row",e._l(e.rooms,(function(t){return r("v-col",{key:t.id},[r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",outlined:""}},[r("v-list-item",{attrs:{"three-line":""}},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"headline mb-1"},[e._v(" "+e._s(t.title)+" ")])],1)],1),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:function(r){return e.joinRoom(t._id,t.title)}}},[e._v("Join")])],1)],1)],1)})),1)],1)},ve=[],be={data:function(){return{rooms:[]}},created:function(){this.fetch()},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms","successMessage","errorMessage"])),{},{fetch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("room");case 2:r=t.sent,e.rooms=r.data;case 4:case"end":return t.stop()}}),t)})))()},joinRoom:function(e,t){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.a.post("join/".concat(e));case 3:return n.next=5,r.fetchRooms();case 5:r.successMessage("Now you are one of ".concat(t,"!")),r.$router.push("/chat/".concat(e)),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),r.errorMessage("You've already joined ".concat(t,"!"));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()}})},ge=be,we=r("62ad"),xe=Object(o["a"])(ge,he,ve,!1,null,null,null),ke=xe.exports;R()(xe,{VBtn:V["a"],VCard:Z["a"],VCardActions:ee["a"],VCol:we["a"],VListItem:S["a"],VListItemContent:q["a"],VListItemTitle:q["b"],VRow:Y["a"]});var _e={user:null},Re={user:function(e){return e.user}},je={signup:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,w.a.post("signup",t);case 3:a=r.sent,w.a.defaults.headers.common["Authorization"]=a.data.session,n("setUser",a.data);case 6:case"end":return r.stop()}}),r)})))()},login:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,w.a.post("login",t);case 3:a=r.sent,w.a.defaults.headers.common["Authorization"]=a.data.session,n("setUser",a.data);case 6:case"end":return r.stop()}}),r)})))()}},Oe={setUser:function(e,t){return e.user=t}},ye={state:_e,getters:Re,actions:je,mutations:Oe},Ve={rooms:[]},Ce={rooms:function(e){return e.rooms}},Me={fetchRooms:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,w.a.get("myroom");case 3:n=t.sent,r("setRooms",n.data);case 5:case"end":return t.stop()}}),t)})))()}},Ue={setRooms:function(e,t){return e.rooms=t}},$e={state:Ve,getters:Ce,actions:Me,mutations:Ue};n["a"].use(b["a"]);var Se={snackbar:{}},qe={snackbar:function(e){return e.snackbar}},Ee={successMessage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a={showing:!0,text:t,color:"success"},n("setSnackbar",a);case 3:case"end":return r.stop()}}),r)})))()},errorMessage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a={showing:!0,text:t,color:"error"},n("setSnackbar",a);case 3:case"end":return r.stop()}}),r)})))()},infoMessage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a={showing:!0,text:t,color:"info"},n("setSnackbar",a);case 3:case"end":return r.stop()}}),r)})))()}},Pe={setSnackbar:function(e,t){return e.snackbar=t}},Le=new b["a"].Store({modules:{Auth:ye,Chat:$e},state:Se,getters:qe,actions:Ee,mutations:Pe});n["a"].use(d["a"]);var Ae=[{path:"/",name:"main",component:B,children:[{path:"/chat/:id/",component:re,props:!0},{path:"/create",component:fe},{path:"/login",component:K,meta:{isPublic:!0}},{path:"/signup",component:ie,meta:{isPublic:!0}},{path:"/",component:ke}]}],Te=new d["a"]({routes:Ae});Te.beforeEach((function(e,t,r){if(!e.meta.isPublic&&!Le.getters.user)return r("login");r()}));var Be=Te,Ie=r("5132"),Ne=r.n(Ie),Fe=r("8055"),De=r.n(Fe);n["a"].use(new Ne.a({debug:!1,connection:De()(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SOCKET_URL||"/")})),n["a"].config.productionTip=!1,w.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"/api/",new n["a"]({store:Le,vuetify:m,router:Be,render:function(e){return e(u)}}).$mount("#app")},"88fe":function(e,t,r){},"8a23":function(e,t,r){}});
//# sourceMappingURL=app.04d4abaf.js.map
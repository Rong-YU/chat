(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("8a23"),a=n.n(r);a.a},1:function(e,t){},"22de":function(e,t,n){"use strict";var r=n("88fe"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o=(n("034f"),n("2877")),i={},c=Object(o["a"])(i,a,s,!1,null,null,null),u=c.exports,l=n("f309");r["a"].use(l["a"]);var m=new l["a"]({}),d=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:"",clipped:""},scopedSlots:e._u([{key:"append",fn:function(){return[n("div",{staticClass:"pa-2"},[n("v-switch",{attrs:{primary:"",label:"Dark"},model:{value:e.$vuetify.theme.dark,callback:function(t){e.$set(e.$vuetify.theme,"dark",t)},expression:"$vuetify.theme.dark"}}),n("v-btn",{attrs:{block:"",to:"/room"}},[e._v("Room List")]),n("v-btn",{attrs:{block:"",to:"/create"}},[e._v("Create Room")]),n("v-btn",{attrs:{block:""},on:{click:e.logOut}},[e._v("Logout")])],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.rooms?n("div",[n("v-list",{attrs:{shaped:""}},e._l(e.rooms,(function(t){return n("v-list-item",{key:t._id,attrs:{to:"/chat/"+t._id}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.title)}},[e._v(e._s(t._id))])],1),n("v-btn",{attrs:{icon:"",color:"gray"},on:{click:function(n){return e.deleteRoom(t._id)}}},[n("v-icon",[e._v("mdi-cancel")])],1)],1)})),1)],1):e._e()]),n("v-app-bar",{attrs:{app:"","clipped-left":""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Vuetify Chat")])],1),n("v-content",[n("v-container",{staticClass:"fill-height"},[n("router-view")],1)],1),n("v-footer",{attrs:{app:""}},[n("span",[e._v("Â© 2020")])])],1)},p=[],h=(n("96cf"),n("1da1")),v=n("5530"),b=n("2f62"),g=n("bc3a"),w=n.n(g),x={props:{source:String},data:function(){return{drawer:null,items:[{name:"chat"}]}},created:function(){this.$vuetify.theme.dark=!0},computed:Object(b["c"])(["user","rooms"]),methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms"])),{},{logOut:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.go("/login");case 1:case"end":return t.stop()}}),t)})))()},deleteRoom:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,w.a.delete("room/".concat(e));case 2:return n.next=4,t.fetchRooms();case 4:case"end":return n.stop()}}),n)})))()}})},_=x,k=(n("22de"),n("6544")),R=n.n(k),j=n("7496"),O=n("40dc"),V=n("5bc1"),y=n("8336"),C=n("a523"),$=n("a75b"),U=n("553a"),q=n("132d"),E=n("8860"),P=n("da13"),A=n("5d23"),L=n("f774"),S=n("b73d"),T=n("2a7f"),M=Object(o["a"])(_,f,p,!1,null,null,null),I=M.exports;R()(M,{VApp:j["a"],VAppBar:O["a"],VAppBarNavIcon:V["a"],VBtn:y["a"],VContainer:C["a"],VContent:$["a"],VFooter:U["a"],VIcon:q["a"],VList:E["a"],VListItem:P["a"],VListItemContent:A["a"],VListItemTitle:A["b"],VNavigationDrawer:L["a"],VSwitch:S["a"],VToolbarTitle:T["a"]});var B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"mx-auto"},[n("v-container",[n("v-row",[n("v-text-field",{attrs:{counter:12,label:"Username",hint:"Username for login",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-row",[n("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"input-10-1",label:"Password",hint:"At least 6 characters",counter:"",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Log in")]),n("v-btn",{staticClass:"mr-4",on:{click:e.clear}},[e._v("clear")]),n("v-btn",{staticClass:"mr-4",on:{click:function(t){return e.$router.push("signup")}}},[e._v("Sign Up")])],1)},F=[],N={data:function(){return{show:!1,username:"",password:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.username.length>=4&&this.username.length<=12&&this.password.length>=6}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["login","fetchRooms"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.login({username:e.username,password:e.password});case 2:return t.next=4,e.fetchRooms();case 4:e.$router.push("/");case 5:case"end":return t.stop()}}),t)})))()},clear:function(){this.username="",this.password=""}})},D=N,J=n("4bd4"),z=n("0fd9"),H=n("8654"),K=Object(o["a"])(D,B,F,!1,null,null,null),G=K.exports;R()(K,{VBtn:y["a"],VContainer:C["a"],VForm:J["a"],VRow:z["a"],VTextField:H["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"d-flex flex-column fill-height flex-grow-1",attrs:{flat:""}},[n("v-card-title",[e._v("room title")]),n("v-card-text",{staticClass:"flex-grow-1 overflow-y-auto"},e._l(e.messages,(function(t){return n("div",{key:t._id,staticClass:"d-flex",class:{"flex-row-reverse":t.user===e.user.id}},[n("v-card",{staticClass:"ma-3",attrs:{outlined:""}},[n("v-card-title",{staticClass:"text-body-1"},[e._v(e._s(t.nickname))]),n("v-card-text",[e._v(e._s(t.content))]),n("v-card-text",[e._v(e._s(t.createAt))])],1)],1)})),0),n("v-card-text",{staticClass:"flex-shrink-1"},[n("v-text-field",{attrs:{id:"input"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("v-btn",{staticClass:"mr-4",on:{click:e.send}},[e._v("Send")])],1)],1)},W=[],X={props:{id:{}},data:function(){return{messages:[],message:null}},sockets:{message:function(e){this.messages.push(e)}},created:function(){this.fetchMessages(),this.joinRoom()},computed:Object(v["a"])({},Object(b["c"])(["user","rooms"])),mounted:function(){document.getElementById("input").scrollIntoView()},watch:{$route:"joinRoom"},methods:{scrollToEnd:function(){var e=this.$el.querySelector("#input");e.scrollTop=e.scrollHeight},fetchMessages:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("room/".concat(e.id));case 2:n=t.sent,console.log("messages",n.data.messages),e.messages=n.data.messages;case 5:case"end":return t.stop()}}),t)})))()},send:function(){this.$socket.emit("message",{id:this.id,userId:this.$store.state.Auth.user,message:this.message}),this.message=""},joinRoom:function(){this.$socket.emit("joinRoom",this.id),this.fetchMessages()}}},Y=X,Z=n("b0af"),ee=n("99d9"),te=Object(o["a"])(Y,Q,W,!1,null,null,null),ne=te.exports;R()(te,{VBtn:y["a"],VCard:Z["a"],VCardText:ee["b"],VCardTitle:ee["c"],VTextField:H["a"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"mx-auto"},[n("v-container",[n("v-row",[n("v-text-field",{attrs:{counter:12,label:"Username",hint:"Username for login",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-row",[n("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show?"text":"password",name:"input-10-1",label:"Password",hint:"At least 6 characters",counter:"",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-row",[n("v-text-field",{attrs:{counter:10,label:"Nickname",hint:"Displays to everybody",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Sign Up")]),n("v-btn",{on:{click:e.clear}},[e._v("clear")])],1)},ae=[],se={data:function(){return{show:!1,username:"",password:"",nickname:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.username.length>=4&&this.username.length<=12&&this.nickname.length>=4&&this.nickname.length<=10&&this.password.length>=6}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["signup"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.signup({nickname:e.nickname,username:e.username,password:e.password});case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))()},clear:function(){this.username="",this.password="",this.nickname=""}})},oe=se,ie=Object(o["a"])(oe,re,ae,!1,null,null,null),ce=ie.exports;R()(ie,{VBtn:y["a"],VContainer:C["a"],VForm:J["a"],VRow:z["a"],VTextField:H["a"]});var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{staticClass:"mx-auto"},[n("v-container",[n("v-row",[n("v-text-field",{attrs:{counter:12,label:"Room Name",rules:[e.rules.required,e.rules.minUsername],required:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valide},on:{click:e.submit}},[e._v("Create")])],1)},le=[],me={data:function(){return{show:!1,title:"",rules:{required:function(e){return!!e||"Required."},minUsername:function(e){return e.length>=4||"Min 4 characters"},min:function(e){return e.length>=6||"Min 6 characters"}}}},computed:{valide:function(){return this.title.length>=4&&this.title.length<=12}},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms"])),{},{submit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("room",{title:e.title});case 2:return t.next=4,e.fetchRooms();case 4:e.$router.push("/");case 5:case"end":return t.stop()}}),t)})))()}})},de=me,fe=Object(o["a"])(de,ue,le,!1,null,null,null),pe=fe.exports;R()(fe,{VBtn:y["a"],VContainer:C["a"],VForm:J["a"],VRow:z["a"],VTextField:H["a"]});var he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-3"},[n("h3",[e._v("Room List")]),n("v-row",e._l(e.rooms,(function(t){return n("v-col",{key:t.id},[n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",outlined:""}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline mb-1"},[e._v(e._s(t.title))])],1)],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(n){return e.joinRoom(t._id)}}},[e._v("Join")])],1)],1)],1)})),1)],1)},ve=[],be={data:function(){return{rooms:[]}},created:function(){this.fetch()},methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])(["fetchRooms"])),{},{fetch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("room");case 2:n=t.sent,e.rooms=n.data;case 4:case"end":return t.stop()}}),t)})))()},joinRoom:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,w.a.post("join/".concat(e));case 2:return n.next=4,t.fetchRooms();case 4:t.$router.push("/");case 5:case"end":return n.stop()}}),n)})))()}})},ge=be,we=n("62ad"),xe=Object(o["a"])(ge,he,ve,!1,null,null,null),_e=xe.exports;R()(xe,{VBtn:y["a"],VCard:Z["a"],VCardActions:ee["a"],VCol:we["a"],VListItem:P["a"],VListItemContent:A["a"],VListItemTitle:A["b"],VRow:z["a"]});var ke={user:null},Re={user:function(e){return e.user}},je={signup:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,w.a.post("signup",t);case 3:a=n.sent,w.a.defaults.defaults.headers.common["Authorization"]=a.data.session,r("setUser",a.data);case 6:case"end":return n.stop()}}),n)})))()},login:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,w.a.post("login",t);case 3:a=n.sent,w.a.defaults.headers.common["Authorization"]=a.data.session,r("setUser",a.data);case 6:case"end":return n.stop()}}),n)})))()}},Oe={setUser:function(e,t){return e.user=t}},Ve={state:ke,getters:Re,actions:je,mutations:Oe},ye={rooms:[]},Ce={rooms:function(e){return e.rooms}},$e={fetchRooms:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,w.a.get("myroom");case 3:r=t.sent,n("setRooms",r.data);case 5:case"end":return t.stop()}}),t)})))()}},Ue={setRooms:function(e,t){return e.rooms=t}},qe={state:ye,getters:Ce,actions:$e,mutations:Ue};r["a"].use(b["a"]);var Ee=new b["a"].Store({modules:{Auth:Ve,Chat:qe}});r["a"].use(d["a"]);var Pe=[{path:"/",name:"main",component:I,children:[{path:"/chat/:id/",component:ne,props:!0},{path:"/create",component:pe},{path:"/login",component:G,meta:{isPublic:!0}},{path:"/signup",component:ce,meta:{isPublic:!0}},{path:"/room",component:_e}]}],Ae=new d["a"]({routes:Pe});Ae.beforeEach((function(e,t,n){if(!e.meta.isPublic&&!Ee.getters.user)return n("login");n()}));var Le=Ae,Se=n("5132"),Te=n.n(Se),Me=n("8055"),Ie=n.n(Me);r["a"].use(new Te.a({debug:!0,connection:Ie()(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SOCKET_URL||"/")})),r["a"].config.productionTip=!1,w.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"/api/",new r["a"]({store:Ee,vuetify:m,router:Le,render:function(e){return e(u)}}).$mount("#app")},"88fe":function(e,t,n){},"8a23":function(e,t,n){}});
//# sourceMappingURL=app.217b5e1e.js.map